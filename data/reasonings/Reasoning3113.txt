<thinking>
1. Problem summary: Count subarrays where the first and last elements are equal to the subarray's maximum element.
2. Problem type / algorithm category: Brute Force, Subarray enumeration.
3. Step-by-step approach: Iterate through all possible start indices i. For each start index, iterate through all possible end indices j. Maintain the maximum element within the subarray nums[i:j+1]. If nums[i] equals nums[j] and both are equal to the maximum element found so far, increment the count.
4. Edge cases: An array with a single element. All elements being the same.
5. Time and space complexity: Time complexity is O(n^2) due to nested loops. Space complexity is O(1) as only a few variables are used.
</thinking>